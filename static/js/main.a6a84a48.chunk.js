(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1096:function(e,t){},1131:function(e,t){},1139:function(e,t){},1141:function(e,t){},1161:function(e,t){},1163:function(e,t){},1170:function(e,t){},1172:function(e,t){},1180:function(e,t){},1291:function(e,t){},1361:function(e,t){},1363:function(e,t){},1366:function(e,t){},1399:function(e,t){},1412:function(e,t){},1414:function(e,t){},1418:function(e,t){},1455:function(e,t){},1714:function(e,t,n){"use strict";n.r(t);var o=n(671),a=n(6),r=n.n(a),i=n(209),c=n.n(i),s=n(51),l=n.n(s),u=n(211),h=n(212),d=n(282),m=n(287),f=n(169),p=n(283),v=n(213),w=n(389),g=n.n(w),b=n(141),E=n.n(b),y=n(665),k=n.n(y),x=n(666),O=n.n(x),C=n(667),S=n.n(C),j=(n(768),function(e){return new Promise(function(t){return setTimeout(t,e)})}),T=function(e){function t(){var e,n;Object(h.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(m.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(a)))).state={chan:window.location.hash.slice(1)||void 0,uiType:void 0},n}return Object(p.a)(t,e),Object(d.a)(t,[{key:"startComputer",value:function(){var e=Object(u.a)(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.state.chan,this.setState({uiType:"computer"}),t||(t=Math.random().toString(36).slice(2),this.setState({chan:t}));case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"startCamera",value:function(){var e=Object(u.a)(l.a.mark(function e(){var t,n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({uiType:"camera"}),e.next=3,j(300);case 3:return e.prev=3,e.next=6,navigator.mediaDevices.getUserMedia({audio:!1,video:!0});case 6:t=e.sent,(n=document.getElementById("cameraPreview")).srcObject=t,n.play(),window.stream=t,n.onclick=function(){var e=document.getElementById("capturedFrame");e.width=n.videoWidth,e.height=n.videoHeight;var t=e.getContext("2d");t.drawImage(n,0,0,e.width,e.height);var o=t.getImageData(0,0,e.width,e.height).data,a=k()(o,e.width,e.height);console.log("jsqr",a)},e.next=19;break;case 14:throw e.prev=14,e.t0=e.catch(3),console.log("video error",e.t0),console.log(e.t0),e.t0;case 19:case"end":return e.stop()}},e,this,[[3,14]])}));return function(){return e.apply(this,arguments)}}()},{key:"renderComputer",value:function(){this.props.classes;var e=this.state.chan,t=window.location.href.replace(/#.*./,"")+"#"+e;return r.a.createElement("center",null,r.a.createElement("br",null),r.a.createElement("div",{style:{display:"inline-block",width:520,textAlign:"left"}},r.a.createElement("div",{style:{float:"right",marginLeft:8}},r.a.createElement(S.a,{value:t})),r.a.createElement(E.a,{variant:"h3",gutterBottom:!0},"Connect camera"),r.a.createElement(E.a,null,"To connect a camera, open the web-app, scan the QR-code, or open the following url on your mobile phone / device: ",r.a.createElement("br",null)," ",r.a.createElement("code",null,t),r.a.createElement("br",null))))}},{key:"renderCamera",value:function(){this.props.classes;var e=this.state.chan;return r.a.createElement("center",null,!e&&r.a.createElement("div",{style:{position:"fixed",left:"50%",width:320,marginLeft:-160,top:50,display:"inline-block",textShadow:"1px 1px 4px white"}},r.a.createElement(E.a,{variant:"h4",gutterBottom:!0},"Point the camera to the QR-code on the computer to connect.")),r.a.createElement("video",{style:{maxWidth:window.innerWidth,maxHeight:window.innerHeight},id:"cameraPreview"})," ",r.a.createElement("br",null),r.a.createElement("canvas",{id:"capturedFrame"}))}},{key:"render",value:function(){var e=this,t=this.state.uiType,n=this.props.classes;return"computer"===t?this.renderComputer():"camera"===t?this.renderCamera():r.a.createElement("center",null,r.a.createElement(E.a,{gutterBottom:!0,variant:"h2"},"Stop Motion"),r.a.createElement(E.a,null,"Is this the UI on a computer/tablet or is it a camera/tablet/phone?"),r.a.createElement(g.a,{variant:"contained",color:"primary",className:n.button,onClick:function(){return e.startComputer()}},"Computer"),r.a.createElement(g.a,{variant:"contained",color:"primary",className:n.button,onClick:function(){return e.startCamera()}},"Camera"),r.a.createElement(E.a,{component:"div"},r.a.createElement("div",{style:{textAlign:"left",maxWidth:"60ex"}},r.a.createElement(O.a,{source:"\n\n### About\n\n\nThis is a simple tool for making stop motion animations, with a UI running on a computer/tablet while using a mobile phone or similar as a remote controlled camera. \n\n\n            "}))))}}]),t}(a.Component),A=Object(v.withStyles)(function(e){return{button:{margin:e.spacing.unit}}})(T),I=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function P(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var W=n(672),B=n(171),M=n(669),N=n(670).a.fromJS({hello:"world"}),R={};var U=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||B.c,_=Object(B.d)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;if(R[t.type])return R[t.type](e,t)},U(Object(B.a)(M.a)));n(1699);Object(o.a)();var D=Object(v.createMuiTheme)({typography:{useNextVariants:!0}});c.a.render(r.a.createElement(W.a,{store:_},r.a.createElement(v.MuiThemeProvider,{theme:D},r.a.createElement(A,null))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");I?(function(e,t){fetch(e).then(function(n){var o=n.headers.get("content-type");404===n.status||null!=o&&-1===o.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):P(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):P(t,e)})}}()},436:function(e,t){},677:function(e,t,n){e.exports=n(1714)},768:function(e,t,n){"use strict";(function(e){var t=n(51),o=n.n(t),a=n(211),r=new(n(770))({EXPERIMENTAL:{pubsub:!0,dht:!0},config:{Addresses:{Swarm:["/dns4/ws-star.discovery.libp2p.io/tcp/443/wss/p2p-websocket-star"]}}}),i=Math.random().toString(36).slice(2);window.ipfs=r,r.on("ready",Object(a.a)(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log("IPFS READY"),t.next=4,r.pubsub.subscribe("solsort-stop-motion",function(e){return console.log("pubsub",new TextDecoder("utf-8").decode(e.data))});case 4:r.pubsub.publish("solsort-stop-motion",e.from("hello from ".concat(i," ")+window.navigator.userAgent)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("ipfserr",t.t0);case 10:case"end":return t.stop()}},t,null,[[0,7]])}))),r.on("error",function(e){console.error("IPFS Error:",e)})}).call(this,n(0).Buffer)},875:function(e,t){},888:function(e,t){},895:function(e,t){},897:function(e,t){},975:function(e,t){},977:function(e,t){}},[[677,1,2]]]);
//# sourceMappingURL=main.a6a84a48.chunk.js.map