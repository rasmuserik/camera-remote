(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1098:function(e,t){},1133:function(e,t){},1141:function(e,t){},1143:function(e,t){},1163:function(e,t){},1165:function(e,t){},1172:function(e,t){},1174:function(e,t){},1182:function(e,t){},1293:function(e,t){},1363:function(e,t){},1365:function(e,t){},1368:function(e,t){},1401:function(e,t){},1414:function(e,t){},1416:function(e,t){},1420:function(e,t){},1457:function(e,t){},1716:function(e,t,n){"use strict";n.r(t);var a=n(673),o=n(6),r=n.n(o),i=n(209),c=n.n(i),s=n(666),l=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function u(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var m=n(213),h=n(674),d=n(171),f=n(671),p=n(672).a.fromJS({hello:"world"}),v={};var w=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||d.c,g=Object(d.d)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;if(v[t.type])return v[t.type](e,t)},w(Object(d.a)(f.a)));n(1701);Object(a.a)();var b=Object(m.createMuiTheme)({typography:{useNextVariants:!0}});c.a.render(r.a.createElement(h.a,{store:g},r.a.createElement(m.MuiThemeProvider,{theme:b},r.a.createElement(s.a,null))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");l?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):u(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):u(t,e)})}}()},288:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=n(51),o=n.n(a),r=n(211),i=new(n(772))({EXPERIMENTAL:{pubsub:!0,dht:!0},config:{Addresses:{Swarm:["/dns4/ws-star.discovery.libp2p.io/tcp/443/wss/p2p-websocket-star"]}}});Math.random().toString(36).slice(2);window.ipfs=i,i.on("ready",Object(r.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{console.log("IPFS READY")}catch(t){console.log("ipfserr",t)}case 1:case"end":return e.stop()}},e)}))),i.on("error",function(e){console.error("IPFS Error:",e)})},437:function(e,t){},666:function(e,t,n){"use strict";(function(e){var a=n(51),o=n.n(a),r=n(675),i=n(211),c=n(212),s=n(282),l=n(287),u=n(169),m=n(283),h=n(6),d=n.n(h),f=n(213),p=n(390),v=n.n(p),w=n(141),g=n.n(w),b=n(667),y=n.n(b),E=n(668),S=n.n(E),O=n(669),k=n.n(O),x=n(288),C=function(e){return new Promise(function(t){return setTimeout(t,e)})};function j(e){try{return JSON.parse(new TextDecoder("utf-8").decode(e))}catch(t){return}}function I(t){return e.from(JSON.stringify(t))}var T=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={chan:window.location.hash.slice(1)||void 0,uiType:void 0,msgs:[]},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"startComputer",value:function(){var e=Object(i.a)(o.a.mark(function e(){var t,n=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.chan,this.setState({uiType:"computer"}),t||(t=Math.random().toString(36).slice(2),this.setState({chan:t})),e.next=5,x.a.pubsub.subscribe("solsort-stop-motion-"+t,function(e){var a=n.state.msgs,o=j(e.data);console.log("solsort-stop-motion-"+t,"data",o,e),o&&n.setState({msgs:a.concat([Object(r.a)({recvFrom:e.from,recvDate:(new Date).toISOString()},o)])})});case 5:console.log("solsort-stop-motion-"+t),setInterval(function(){return x.a.pubsub.publish("solsort-stop-motion-"+t,I({ua:window.navigator.userAgent,role:"computer",chan:t,time:(new Date).toISOString()}))},5e3);case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"startCamera",value:function(){var e=Object(i.a)(o.a.mark(function e(){var t,n,a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this.state.chan,this.setState({uiType:"camera"}),e.next=5,C(300);case 5:return e.next=7,navigator.mediaDevices.getUserMedia({audio:!1,video:!0});case 7:n=e.sent,(a=document.getElementById("cameraPreview")).srcObject=n,a.play(),window.stream=n,a.onclick=function(){var e=document.getElementById("capturedFrame");e.width=a.videoWidth,e.height=a.videoHeight;var t=e.getContext("2d");t.drawImage(a,0,0,e.width,e.height);var n=t.getImageData(0,0,e.width,e.height).data,o=y()(n,e.width,e.height);console.log("jsqr",o)},setInterval(function(){return x.a.pubsub.publish("solsort-stop-motion-"+t,I({ua:window.navigator.userAgent,role:"camera",chan:t,time:(new Date).toISOString()}))},5e3),e.next=20;break;case 16:throw e.prev=16,e.t0=e.catch(0),console.log("startCamera error",e.t0),e.t0;case 20:case"end":return e.stop()}},e,this,[[0,16]])}));return function(){return e.apply(this,arguments)}}()},{key:"renderComputer",value:function(){this.props.classes;var e=this.state,t=e.chan,n=e.msgs,a=window.location.href.replace(/#.*./,"")+"#"+t;return d.a.createElement("div",null,d.a.createElement("center",null,d.a.createElement("br",null),d.a.createElement("div",{style:{display:"inline-block",width:520,textAlign:"left"}},d.a.createElement("div",{style:{float:"right",marginLeft:8}},d.a.createElement(k.a,{value:a})),d.a.createElement(g.a,{variant:"h3",gutterBottom:!0},"Connect camera"),d.a.createElement(g.a,null,"To connect a camera, open the web-app, scan the QR-code, or open the following url on your mobile phone / device: ",d.a.createElement("br",null)," ",d.a.createElement("code",null,a),d.a.createElement("br",null)))),d.a.createElement("pre",null,JSON.stringify(n,null,4)))}},{key:"renderCamera",value:function(){this.props.classes;var e=this.state.chan;return d.a.createElement("center",null,!e&&d.a.createElement("div",{style:{position:"fixed",left:"50%",width:320,marginLeft:-160,top:50,display:"inline-block",textShadow:"1px 1px 4px white"}},d.a.createElement(g.a,{variant:"h4",gutterBottom:!0},"Point the camera to the QR-code on the computer to connect.")),d.a.createElement("video",{style:{maxWidth:window.innerWidth,maxHeight:window.innerHeight},id:"cameraPreview"})," ",d.a.createElement("br",null),d.a.createElement("canvas",{id:"capturedFrame"}))}},{key:"render",value:function(){var e=this,t=this.state.uiType,n=this.props.classes;return"computer"===t?this.renderComputer():"camera"===t?this.renderCamera():d.a.createElement("center",null,d.a.createElement(g.a,{gutterBottom:!0,variant:"h2"},"Stop Motion"),d.a.createElement(g.a,null,"Is this the UI on a computer/tablet or is it a camera/tablet/phone?"),d.a.createElement(v.a,{variant:"contained",color:"primary",className:n.button,onClick:function(){return e.startComputer()}},"Computer"),d.a.createElement(v.a,{variant:"contained",color:"primary",className:n.button,onClick:function(){return e.startCamera()}},"Camera"),d.a.createElement(g.a,{component:"div"},d.a.createElement("div",{style:{textAlign:"left",maxWidth:"60ex"}},d.a.createElement(S.a,{source:"\n\n### About\n\n\nThis is a simple tool for making stop motion animations, with a UI running on a computer/tablet while using a mobile phone or similar as a remote controlled camera. \n\n\n            "}))))}}]),t}(h.Component);t.a=Object(f.withStyles)(function(e){return{button:{margin:e.spacing.unit}}})(T)}).call(this,n(0).Buffer)},680:function(e,t,n){e.exports=n(1716)},877:function(e,t){},890:function(e,t){},897:function(e,t){},899:function(e,t){},977:function(e,t){},979:function(e,t){}},[[680,1,2]]]);
//# sourceMappingURL=main.fbfd8aa4.chunk.js.map