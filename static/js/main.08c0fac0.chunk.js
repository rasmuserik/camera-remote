(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1098:function(e,t){},1133:function(e,t){},1141:function(e,t){},1143:function(e,t){},1163:function(e,t){},1165:function(e,t){},1172:function(e,t){},1174:function(e,t){},1182:function(e,t){},1293:function(e,t){},1363:function(e,t){},1365:function(e,t){},1368:function(e,t){},1401:function(e,t){},1414:function(e,t){},1416:function(e,t){},1420:function(e,t){},1457:function(e,t){},1716:function(e,t,n){"use strict";n.r(t);var a=n(673),r=n(6),o=n.n(r),i=n(210),c=n.n(i),s=n(666);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var u=n(213),l=n(674),m=n(172),h=n(671),p=n(672).a.fromJS({hello:"world"}),d={};var f=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||m.c,v=Object(m.d)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;if(d[t.type])return d[t.type](e,t)},f(Object(m.a)(h.a)));n(1701);Object(a.a)();var w=Object(u.createMuiTheme)({typography:{useNextVariants:!0}});c.a.render(o.a.createElement(l.a,{store:v},o.a.createElement(u.MuiThemeProvider,{theme:w},o.a.createElement(s.a,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},288:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=n(41),r=n.n(a),o=n(171),i=new(n(772))({EXPERIMENTAL:{pubsub:!0,dht:!0},config:{Addresses:{Swarm:["/dns4/ws-star.discovery.libp2p.io/tcp/443/wss/p2p-websocket-star"]}}});Math.random().toString(36).slice(2);window.ipfs=i,i.on("ready",Object(o.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{console.log("IPFS READY")}catch(t){console.log("ipfserr",t)}case 1:case"end":return e.stop()}},e)}))),i.on("error",function(e){console.error("IPFS Error:",e)})},437:function(e,t){},666:function(e,t,n){"use strict";(function(e){var a=n(41),r=n.n(a),o=n(675),i=n(171),c=n(212),s=n(282),u=n(287),l=n(169),m=n(283),h=n(6),p=n.n(h),d=n(213),f=n(390),v=n.n(f),w=n(141),g=n.n(w),b=n(667),E=n.n(b),y=n(668),x=n.n(y),O=n(669),S=n.n(O),k=n(288),C=function(e){return new Promise(function(t){return setTimeout(t,e)})};function I(e){try{return JSON.parse(new TextDecoder("utf-8").decode(e))}catch(t){return}}function j(t){return e.from(JSON.stringify(t))}var T=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={chan:window.location.hash.slice(1)||void 0,uiType:void 0,msgs:[]},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"startComputer",value:function(){var e=Object(i.a)(r.a.mark(function e(){var t,n=this;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.chan,this.setState({uiType:"computer"}),t||(t=Math.random().toString(36).slice(2),this.setState({chan:t})),e.next=5,k.a.pubsub.subscribe("solsort-stop-motion-"+t,function(e){var a=n.state.msgs,r=I(e.data);console.log("solsort-stop-motion-"+t,"data",r,e),r&&n.setState({msgs:a.concat([Object(o.a)({recvFrom:e.from,recvDate:(new Date).toISOString()},r)])})});case 5:console.log("solsort-stop-motion-"+t),setInterval(function(){return k.a.pubsub.publish("solsort-stop-motion-"+t,j({ua:window.navigator.userAgent,role:"computer",chan:t,time:(new Date).toISOString()}))},5e3);case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"startCamera",value:function(){var e=Object(i.a)(r.a.mark(function e(){var t,n,a,o,c=this;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.setState({uiType:"camera"}),e.next=4,C(300);case 4:return e.next=6,navigator.mediaDevices.getUserMedia({audio:!1,video:!0});case 6:return t=e.sent,(n=document.getElementById("cameraPreview")).srcObject=t,n.play(),a=function(){var e=Object(i.a)(r.a.mark(function e(){var t,a,o,i,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c.state.chan){e.next=13;break}return e.next=3,C(1e3);case 3:(t=document.getElementById("capturedFrame")).width=n.videoWidth,t.height=n.videoHeight,(a=t.getContext("2d")).drawImage(n,0,0,t.width,t.height),o=a.getImageData(0,0,t.width,t.height),i=o.data,(s=E()(i,t.width,t.height))&&c.setState({chan:s.data.replace(/^.*#/,"")}),e.next=0;break;case 13:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),e.next=13,a();case 13:o=this.state.chan,setInterval(function(){return k.a.pubsub.publish("solsort-stop-motion-"+o,j({ua:window.navigator.userAgent,role:"camera",chan:o,time:(new Date).toISOString()}))},5e3),e.next=21;break;case 17:throw e.prev=17,e.t0=e.catch(0),console.log("startCamera error",e.t0),e.t0;case 21:case"end":return e.stop()}},e,this,[[0,17]])}));return function(){return e.apply(this,arguments)}}()},{key:"renderComputer",value:function(){this.props.classes;var e=this.state,t=e.chan,n=e.msgs,a=window.location.href.replace(/#.*./,"")+"#"+t;return p.a.createElement("div",null,p.a.createElement("center",null,p.a.createElement("br",null),p.a.createElement("div",{style:{display:"inline-block",width:520,textAlign:"left"}},p.a.createElement("div",{style:{float:"right",marginLeft:8}},p.a.createElement(S.a,{value:a})),p.a.createElement(g.a,{variant:"h3",gutterBottom:!0},"Connect camera"),p.a.createElement(g.a,null,"To connect a camera, open the web-app, scan the QR-code, or open the following url on your mobile phone / device: ",p.a.createElement("br",null)," ",p.a.createElement("code",null,a),p.a.createElement("br",null)))),p.a.createElement("pre",null,JSON.stringify(n,null,4)))}},{key:"renderCamera",value:function(){this.props.classes;var e=this.state.chan;return p.a.createElement("center",null,!e&&p.a.createElement("div",{style:{position:"fixed",left:"50%",width:320,marginLeft:-160,top:50,display:"inline-block",textShadow:"1px 1px 4px white"}},p.a.createElement(g.a,{variant:"h4",gutterBottom:!0},"Point the camera to the QR-code on the computer to connect.")),p.a.createElement("video",{style:{maxWidth:window.innerWidth,maxHeight:window.innerHeight},id:"cameraPreview"})," ",p.a.createElement("br",null),p.a.createElement("canvas",{id:"capturedFrame"}))}},{key:"render",value:function(){var e=this,t=this.state.uiType,n=this.props.classes;return"computer"===t?this.renderComputer():"camera"===t?this.renderCamera():p.a.createElement("center",null,p.a.createElement(g.a,{gutterBottom:!0,variant:"h2"},"Stop Motion"),p.a.createElement(g.a,null,"Is this the UI on a computer/tablet or is it a camera/tablet/phone?"),p.a.createElement(v.a,{variant:"contained",color:"primary",className:n.button,onClick:function(){return e.startComputer()}},"Computer"),p.a.createElement(v.a,{variant:"contained",color:"primary",className:n.button,onClick:function(){return e.startCamera()}},"Camera"),p.a.createElement(g.a,{component:"div"},p.a.createElement("div",{style:{textAlign:"left",maxWidth:"60ex"}},p.a.createElement(x.a,{source:"\n\n      ### About\n\n\nThis is a simple tool for making stop motion animations, with a UI running on a computer/tablet while using a mobile phone or similar as a remote controlled camera. \n\n\n            "}))))}}]),t}(h.Component);t.a=Object(d.withStyles)(function(e){return{button:{margin:e.spacing.unit}}})(T)}).call(this,n(0).Buffer)},680:function(e,t,n){e.exports=n(1716)},877:function(e,t){},890:function(e,t){},897:function(e,t){},899:function(e,t){},977:function(e,t){},979:function(e,t){}},[[680,1,2]]]);
//# sourceMappingURL=main.08c0fac0.chunk.js.map